apiVersion: convex.icod.de/v1alpha1
kind: ConvexInstance
metadata:
  labels:
    app.kubernetes.io/name: convex-operator
    app.kubernetes.io/managed-by: kustomize
  name: convex-dev
spec:
  environment: dev
  version: "1.0.0"
  backend:
    image: ghcr.io/get-convex/convex-backend:1.0.0
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 500m
        memory: 1Gi
    db:
      engine: sqlite
    storage:
      mode: sqlite
      pvc:
        enabled: true
        storageClassName: standard
        size: 20Gi
    s3:
      enabled: false
  dashboard:
    enabled: true
    replicas: 1
  networking:
    host: convex-dev.example.com
    gatewayClassName: nginx
    tlsSecretRef: convex-dev-tls
  maintenance:
    upgradeStrategy: inPlace
    restartInterval: 168h
